import{s as b}from"./stations.933f52c0.js";import{d as C,_ as g,r as a,e as y,f as F,o,g as m,w as p,c as f,n as I,a as e,t as v,b as k,T as B,p as L,h as T,i as V,F as j,j as N}from"./index.ae705c32.js";const r=C({id:"appState",state:()=>({load:!1,count:0}),getters:{getLoad:t=>t.load,getCount:t=>t.count},actions:{async setLoad(t){this.load=t,console.log(this.load,t)},async incrementCount(){await this.count++}}});const n=t=>(L("data-v-47f3b4ae"),t=t(),T(),t),$={key:0,class:"ui-mark",style:{filter:"blur(2px) grayscale(100%)"}},D=n(()=>e("div",{class:"ui-mark-title"},[e("div",{style:{"margin-bottom":".5rem",width:"100%",background:"silver",height:"1rem"}})],-1)),M=n(()=>e("div",{class:"ui-mark-content"},[e("div",{class:"ui-mark-content-title"}),e("div",{class:"ui-mark-content-info"},[e("div",{class:"ui-mark-content-info-icon fal fa-temperature-sun"}),e("div",{style:{width:"70%",background:"silver",height:"1rem"}})])],-1)),q=n(()=>e("div",{class:"ui-mark-content"},[e("div",{class:"ui-mark-content-title"}),e("div",{class:"ui-mark-content-info"},[e("div",{class:"ui-mark-content-info-icon fal fa-hand-holding-water"}),e("div",{style:{width:"70%",background:"silver",height:"1rem"}})])],-1)),z=[D,M,q],A={class:"ui-mark-title"},E={class:"ui-mark-content"},H=n(()=>e("div",{class:"ui-mark-content-title"},"Temperatura:",-1)),G={class:"ui-mark-content-info"},J=n(()=>e("div",{class:"ui-mark-content-info-icon fal fa-temperature-sun"},null,-1)),K={class:"ui-mark-content"},O=n(()=>e("div",{class:"ui-mark-content-title"},"Humedad:",-1)),P={class:"ui-mark-content-info"},Q=n(()=>e("div",{class:"ui-mark-content-info-icon fal fa-hand-holding-water"},null,-1)),R={props:{id:{type:Number,required:!0}},setup(t){const l=t;r();const i=a({}),d=a({}),c=a({}),s=a({});a(),a();const u=a(!1),h=a(!1),w=async()=>{const _=await(await fetch(`https://api.thingspeak.com/channels/${l.id}/feeds.json`)).json();i.value=_.feeds,d.value=_.channel,s.value=i.value[i.value.length-1],await r().incrementCount(),c.value.created_at!==s.value.created_at?(c.value=s.value,u.value=!0):u.value=!1,h.value=!0};return y(async()=>{await setInterval(async()=>{await w()},2e3)}),(S,_)=>{const x=F("router-link");return o(),m(B,{name:"fade",duration:{enter:1e3,leave:800},mode:"out-in"},{default:p(()=>[h.value===!1?(o(),f("div",$,z)):(o(),m(x,{key:1,class:I(["ui-mark",[u.value?"sensor-active":""]]),to:"/sensor/"+t.id},{default:p(()=>[e("div",A,v(d.value.name),1),e("div",E,[H,e("div",G,[J,k(" "+v(parseFloat(s.value.field1).toFixed(2))+" \xB0C ",1)])]),e("div",K,[O,e("div",P,[Q,k(" "+v(parseFloat(s.value.field2).toFixed(2))+" % ",1)])])]),_:1},8,["to","class"]))]),_:1})}}};var U=g(R,[["__scopeId","data-v-47f3b4ae"]]);const W={class:"sensors"},X={setup(t){const l=a(b);return V(async()=>{await r().setLoad(!1)}),y(async()=>{console.log(await r().getLoad)}),(i,d)=>(o(),f("div",W,[(o(!0),f(j,null,N(l.value,(c,s)=>(o(),m(U,{key:s,id:c.id},null,8,["id"]))),128))]))}};var ee=g(X,[["__scopeId","data-v-e9fd8702"]]);export{ee as default};
