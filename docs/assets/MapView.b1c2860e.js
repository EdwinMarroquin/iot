import{A as g,H as F,S as y}from"./index.c562f201.js";import{s as w}from"./stations.933f52c0.js";import{r as i,G as j,i as S,o as l,g as m,w as c,u as n,c as x,j as B,k as D,a,t as d,b as _,F as I}from"./index.2f7b28de.js";const z={class:"ui-mark-title"},A={class:"ui-mark-content"},C=a("div",{class:"ui-mark-content-title"},"Temperatura:",-1),E={class:"ui-mark-content-info"},N=a("div",{class:"ui-mark-content-info-icon fal fa-temperature-sun"},null,-1),Q={class:"ui-mark-content"},V=a("div",{class:"ui-mark-content-title"},"Humedad:",-1),b={class:"ui-mark-content-info"},H=a("div",{class:"ui-mark-content-info-icon fal fa-hand-holding-water"},null,-1),K={setup(T){const r=i(w),f=i({}),u=i([]),e=j([]),k=async()=>{r.value.map(async s=>{const t=await(await fetch(`https://api.thingspeak.com/channels/${s.id}/feeds.json?results=1`)).json();await u.value.push(t),e.push({info:{name:t.channel.name,t:parseFloat(t.feeds[t.feeds.length-1].field1),h:parseFloat(t.feeds[t.feeds.length-1].field2)},options:{position:{lat:parseFloat(t.channel.latitude),lng:parseFloat(t.channel.longitude)},title:t.channel.id.toString()}})})},v=async()=>{r.value.map(async s=>{const t=await(await fetch(`https://api.thingspeak.com/channels/${s.id}/feeds.json?results=1`)).json();u.value.forEach((o,p)=>{o.channel.id===t.channel.id&&(e[p].info.t=parseFloat(t.feeds[0].field1),e[p].info.h=parseFloat(t.feeds[0].field2))})})};return S(async()=>{await k(),setInterval(()=>{v()},1e3),f.value={lat:4.6456398,lng:-74.1788349}}),(s,h)=>(l(),m(n(g),{"api-key":"AIzaSyAor4_IQ6zbgIQ44djnjKo1EdsFD8CyqfQ",style:{width:"100%",height:"100%"},styles:[2],zoom:11,center:f.value,titl:"1"},{default:c(()=>[(l(!0),x(I,null,B(n(e),(t,o)=>(l(),m(n(F),{key:o,options:t.options},{default:c(()=>[D(n(y),null,{default:c(()=>[a("div",z,d(t.info.name),1),a("div",A,[C,a("div",E,[N,_(" "+d(parseFloat(t.info.t).toFixed(2))+" \xB0C ",1)])]),a("div",Q,[V,a("div",b,[H,_(" "+d(parseFloat(t.info.h).toFixed(2))+" % ",1)])])]),_:2},1024)]),_:2},1032,["options"]))),128))]),_:1},8,["center"]))}};export{K as default};
